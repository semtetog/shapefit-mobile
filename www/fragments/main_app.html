<div class="page-root">
    
    <!-- PWA Meta Tags -->
    
    <!-- PWA Manifest -->
    
    <!-- Script Critical -->

    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- √çcones -->
    
    <!-- Lottie.js para anima√ß√µes dos banners -->

    <!-- CSS Principal -->
    
    <!-- Carregar config ANTES de tudo -->

    <!-- Auth Script -->

    <style>
        :root {
            --keyboard-offset: 0px;
        }
        
        html, body {
            min-height: 100%;
        }
        
        body {
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            overflow-x: hidden;
        }
        
        body.checkin-modal-open {
            overflow: hidden;
        }
        
        a, button, .btn, [role="button"] {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
    </style>
    
    <style>
        .lottie-animation-container {
        width: 100%;
        height: 100%;
    }
    .main-carousel .lottie-slide.active {
        opacity: 1 !important;
    }
</style>

<style>
/* CSS do layout moderno */
.header{display:flex;justify-content:flex-end;align-items:center}.header-actions{display:flex;align-items:center;gap:.75rem}.points-counter-badge{display:flex;align-items:center;gap:8px;height:44px;padding:0 16px;border-radius:22px;background-color:var(--surface-color);border:1px solid var(--border-color);color:var(--text-primary);text-decoration:none;transition:all .2s ease}.points-counter-badge:hover{border-color:var(--accent-orange)}.points-counter-badge i{color:var(--accent-orange);font-size:1rem}.points-counter-badge span{font-weight:600;font-size:1rem}
.profile-icon{display:flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:50%;border:1px solid var(--border-color);background-color:var(--surface-color);overflow:hidden;transition:border-color .2s ease}
.profile-icon:hover{border-color:var(--accent-orange)}
.profile-icon img{width:100%;height:100%;object-fit:cover}
.profile-icon i{color:var(--accent-orange);font-size:1.2rem;}

/* ============================================== */
/* --- CSS PARA OS CARDS INDIVIDUAIS DE RESUMO --- */
/* ============================================== */
.card-weight { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; position: relative; gap: 4px; padding: 24px; }
.card-weight span { font-size: 0.9rem; color: var(--text-secondary); }
.card-weight strong { font-size: 2.2rem; line-height: 1.2; color: var(--text-primary); }
.card-weight .countdown { font-size: 2rem; }
.card-weight .edit-button { position: absolute; top: 16px; right: 16px; background: none; border: none; color: var(--text-secondary); cursor: pointer; padding: 5px; transition: color 0.2s ease; }
.card-weight .edit-button:hover { color: var(--accent-orange); }
.card-weight .edit-button svg { width: 20px; height: 20px; }

.card-hydration { padding: 20px 24px; overflow: hidden; }
.card-hydration .hydration-content { display: grid; grid-template-columns: minmax(0,1fr) 160px; align-items: center; gap: 12px; }
.card-hydration .hydration-info { flex-grow: 1; display: flex; flex-direction: column; min-width: 0; }
.card-hydration h3 { margin: 0 0 10px 0; font-size: 1.1rem; color: var(--text-primary); }
.card-hydration .water-status { font-size: 1.5rem; font-weight: 600; color: var(--text-primary); margin-bottom: 15px; }
.card-hydration .water-status span:last-child { font-size: 1rem; color: var(--text-secondary); }
.card-hydration .water-controls { display: flex; flex-direction: column; gap: 12px; }
.card-hydration .water-input-row { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
.card-hydration .inline-input-row { display: flex; align-items: center; gap: 8px; flex-wrap: nowrap; margin-left: 24px; }
.card-hydration .water-number-input { width: 120px; padding: 12px 14px; border-radius: 14px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: var(--text-primary); font-weight: 600; text-align: center; }
.card-hydration .water-number-input::placeholder { color: rgba(255,255,255,0.35); }
.card-hydration .circle-btn { width: 64px; height: 64px; border-radius: 50%; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.06); color: var(--text-primary); font-size: 1.8rem; font-weight: 700; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease; }
.card-hydration .circle-btn:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.2); }
.card-hydration .circle-btn.accent { border: none; background-image: var(--primary-orange-gradient); color: var(--text-primary); }
.card-hydration .circle-btn:disabled { opacity: 0.5; cursor: default; filter: grayscale(0.2); }
/* Wrapper para o select de √°gua com setinha customizada */
.card-hydration .water-select-wrapper {
    position: relative;
    display: inline-block;
    min-width: 78px;
}

.card-hydration .water-select { 
    padding: 10px 32px 10px 12px; /* Espa√ßo extra √† direita para a setinha */
    border-radius: 14px; 
    border: 1px solid var(--glass-border); 
    background: rgba(255,255,255,0.05); 
    color: var(--text-primary); 
    font-weight: 700; 
    text-transform: uppercase; 
    width: 100%;
    min-width: 78px;
    /* Remover setinha padr√£o do navegador */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    cursor: pointer;
    transition: border-color 0.2s ease;
}

.card-hydration .water-select:focus {
    outline: none;
    border-color: var(--accent-orange);
}

/* Setinha customizada branca usando Font Awesome */
.card-hydration .water-select-arrow {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    color: var(--text-primary);
    font-size: 0.75rem;
    opacity: 0.8;
    transition: opacity 0.2s ease, color 0.2s ease;
}

.card-hydration .water-select-wrapper:hover .water-select-arrow {
    opacity: 1;
}

.card-hydration .water-select:focus + .water-select-arrow {
    color: var(--accent-orange);
    opacity: 1;
}
.card-hydration .full-btn { width: 100%; padding: 12px 16px; border-radius: 14px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.06); color: var(--text-primary); font-weight: 700; cursor: pointer; text-align: center; }
.card-hydration .quick-add-row { display: flex; flex-wrap: wrap; gap: 8px; }
.card-hydration .quick-add { padding: 8px 12px; border-radius: 999px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.06); color: var(--text-primary); font-weight: 600; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease; }
.card-hydration .quick-add:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.2); }
.card-hydration .water-drop-container-svg { width: 160px; height: 160px; display: flex; align-items: center; justify-content: center; justify-self: end; }
.card-hydration .water-controls { margin-top: 8px; }
.card-hydration .water-input-row { flex-wrap: wrap; }
.card-hydration .water-input-row > * { flex: 0 0 auto; }
.card-hydration .quick-add-row { margin-top: 4px; }
.card-hydration .divider { width: 100%; height: 1px; background: var(--glass-border); margin: 6px 0 2px; opacity: 0.6; }

/* ======================================= */
/* --- CORRE√á√ÉO PARA O CARD DE √ÅGUA MOBILE --- */
/* ======================================= */
@media (max-width: 480px) {
    .card-hydration {
        padding: 20px 24px; /* Padding uniforme */
    }
    .card-hydration .hydration-content {
        /* Muda para layout de coluna em telas pequenas */
        grid-template-columns: 1fr;
        gap: 20px;
    }
    .card-hydration .water-drop-container-svg {
        /* Centraliza a gota d'√°gua */
        justify-self: center;
        width: 150px; /* Levemente menor para caber melhor */
        height: 150px;
        order: -1; /* Coloca a gota no topo */
    }
    .card-hydration .hydration-info {
        /* Centraliza todo o bloco de informa√ß√µes */
        align-items: center;
        text-align: center;
    }
    .card-hydration .water-controls,
    .card-hydration .water-input-row,
    .card-hydration .inline-input-row {
        /* Centraliza os controles */
        justify-content: center;
        margin-left: 0; /* Remove a margem que estava causando o deslocamento */
    }
     .card-hydration .inline-input-row {
        /* Garante que o input e o select fiquem bem alinhados */
        width: 100%;
    }
    .card-hydration .water-number-input {
        /* Ocupa o espa√ßo dispon√≠vel para evitar quebra de linha */
        flex-grow: 1;
    }
}

/* Transi√ß√£o suave para o movimento do grupo do n√≠vel da √°gua */
#animated-water-drop #water-level-group { 
    transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
}

/* Anima√ß√£o das ondas da √°gua */
@keyframes wave-animation {
    0% { transform: translateX(0); }
    50% { transform: translateX(-100px); }
    100% { transform: translateX(0); }
}
@keyframes wave-animation-2 {
    0% { transform: translateX(0); }
    50% { transform: translateX(100px); }
    100% { transform: translateX(0); }
}
#animated-water-drop #wave1 {
    animation: wave-animation 8s linear infinite;
}
#animated-water-drop #wave2 {
    animation: wave-animation-2 10s linear infinite alternate;
}

/* Corrige flicker/preto em mobile ao abrir o select: remove filtros e anima√ß√µes pesadas em telas touch */
@media (hover: none) and (pointer: coarse) {
    #animated-water-drop #water-level-group { filter: none !important; }
    #animated-water-drop #wave1,
    #animated-water-drop #wave2 { animation: none !important; }
}

/* Esta regra for√ßa os cards espec√≠ficos a ocuparem a largura total do grid */
.card-weight,
.card-hydration,
.card-consumption,
.card-missions,
.card-meal-cta,
.card-suggestions,
.card-challenges,
.card-action-item {
    grid-column: 1 / -1;
}

/* ======================================= */
/* --- CSS DOS NOVOS CARDS DE A√á√ÉO --- */
/* ======================================= */
.card-action-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px 24px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
}

.card-action-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(255, 107, 53, 0.15);
}

.card-action-item .action-icon {
    width: 56px;
    height: 56px;
    border-radius: 14px;
    background: rgba(255, 255, 255, 0.06);
    display: flex;
    align-items: stretch;
    justify-content: flex-end;
    flex-shrink: 0;
    transition: all 0.3s ease;
}

.card-action-item .action-icon.premium {
    background: var(--primary-orange-gradient);
}

.card-action-item .action-icon i {
    font-size: 1.5rem;
    color: var(--accent-orange);
}

.card-action-item .action-icon.premium i {
    color: var(--text-primary);
}

.card-action-item:hover .action-icon {
    transform: scale(1.1);
}

.card-action-item .action-content {
    flex: 1;
    min-width: 0;
}

.card-action-item .action-content h3 {
    margin: 0 0 4px 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.card-action-item .action-content p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

.card-action-item .action-button {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.06);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.3s ease;
    color: var(--text-secondary);
    text-decoration: none;
}

.card-action-item:hover .action-button {
    background: var(--primary-orange-gradient);
    color: var(--text-primary);
    transform: translateX(4px);
}

.card-action-item .action-button i {
    font-size: 1rem;
}

/* Responsive */
@media (max-width: 480px) {
    .card-action-item {
        padding: 18px 20px;
        gap: 14px;
    }
    
    .card-action-item .action-icon {
        width: 48px;
        height: 48px;
    }
    
    .card-action-item .action-icon i {
        font-size: 1.3rem;
    }
    
    .card-action-item .action-content h3 {
        font-size: 1rem;
    }
    
    .card-action-item .action-content p {
        font-size: 0.8rem;
    }
}

/* Estilos para o modal de dura√ß√£o de exerc√≠cio */
.duration-input-group {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 8px;
}

.duration-input-group input {
    flex: 1;
    padding: 12px 16px;
    border-radius: 8px;
    border: 1px solid var(--glass-border);
    background: rgba(255,255,255,0.05);
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: 600;
}

.duration-input-group input:focus {
    outline: none;
    border-color: var(--accent-orange);
}

.duration-unit {
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 500;
    min-width: 60px;
}

.form-help {
    color: var(--text-secondary);
    font-size: 0.8rem;
    margin-top: 4px;
    display: block;
}

/* Estilos para modais (VERS√ÉO ROBUSTA) */
.modal-overlay {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    background: rgba(0, 0, 0, 0.8) !important;
    
    /* MUDAN√áA PRINCIPAL: Controle com visibility e opacity */
    display: flex !important; /* Deixe sempre flex para o alinhamento funcionar */
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease, visibility 0s linear 0.3s; /* Anima√ß√£o suave */

    align-items: center !important;
    justify-content: center !important;
    z-index: 99999 !important;
    padding: 20px !important;
}

.modal-overlay.modal-visible {
    /* MUDAN√áA PRINCIPAL: Apenas mude a visibilidade e opacidade */
    visibility: visible;
    opacity: 1;
    transition-delay: 0s; /* Garante que a transi√ß√£o de entrada seja imediata */
}

.modal-content {
    background: var(--surface-color) !important;
    border-radius: 16px !important;
    padding: 24px !important;
    max-width: 400px !important;
    width: 100% !important;
    max-height: 90vh !important;
    overflow-y: auto !important;
    border: 1px solid var(--border-color) !important;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3) !important;
    position: relative !important;
    z-index: 100000 !important;
}

.modal-content h2 {
    margin: 0 0 20px 0;
    color: var(--text-primary);
    font-size: 1.3rem;
    text-align: center;
}

.modal-body {
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: var(--text-primary);
    font-weight: 600;
}

.form-input {
    width: 100%;
    padding: 12px 16px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    background: var(--bg-color);
    color: var(--text-primary);
    font-size: 1rem;
}

.form-input:focus {
    outline: none;
    border-color: var(--accent-orange);
}

/* Input de hor√°rio customizado - LIMPO E SIMPLES */
.time-input {
    width: 100%;
    padding: 16px 20px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    background: var(--bg-color);
    color: var(--text-primary);
    font-size: 1.2rem;
    font-weight: 600;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-sizing: border-box;
    letter-spacing: 1px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

.time-input:focus {
    outline: none;
    border-color: var(--accent-orange);
    box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
}

.modal-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

.primary-button {
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
}

.primary-button.secondary-button {
    background: var(--surface-color);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.primary-button.secondary-button:hover {
    background: var(--border-color);
}

.primary-button:not(.secondary-button) {
    background: var(--accent-orange);
    color: white;
}

.primary-button:not(.secondary-button):hover {
    background: #e55a00;
}

/* Ajustes para mobile - inputs de hor√°rio */
@media (max-width: 480px) {
    .time-input {
        padding: 14px 16px;
        font-size: 1.1rem;
    }
}

/* Card de Consumo - Design Novo */
.card-consumption { 
    padding: 24px; 
    display: flex; 
    flex-direction: column; 
    gap: 20px; 
}

.card-consumption .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    margin-bottom: 6px;
    border-bottom: 1px solid var(--glass-border);
}

.card-consumption .card-header h3 {
    margin: 0;
    font-size: 1.25rem;
    color: var(--text-primary);
    font-weight: 700;
}

.card-consumption .view-all-link {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.2s ease;
}

.card-consumption .view-all-link:hover {
    color: var(--accent-orange);
}

.card-consumption .consumption-content {
    display: flex;
    flex-direction: row; /* Sempre horizontal */
    gap: 16px;
    align-items: center;
    flex-wrap: nowrap; /* Nunca quebra em nova linha */
}

/* C√≠rculo de Calorias (Lado Esquerdo) */
.consumption-calories {
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.consumption-calories-circle {
    position: relative;
    width: 110px;
    height: 110px;
    overflow: visible;
}

.consumption-calories-circle .circular-chart {
    display: block;
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
    overflow: visible;
}

.consumption-calories-circle .circle-bg {
    fill: none;
    stroke: rgba(255, 255, 255, 0.08);
    stroke-width: 3;
}

.consumption-calories-circle .circle {
    fill: none;
    stroke: url(#orange-gradient-consumption);
    stroke-width: 3;
    stroke-linecap: round;
    transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: 50% 50%;
}

.consumption-calories-circle .circle-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.consumption-calories-circle .emoji {
    font-size: 1.5rem;
    line-height: 1;
}

.consumption-calories-circle .calories-value {
    font-size: 1.1rem;
    font-weight: 800;
    color: var(--text-primary);
    line-height: 1;
}

.consumption-calories-circle .calories-label {
    font-size: 0.65rem;
    color: var(--text-secondary);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Macros (Lado Direito) - Layout Grid */
.consumption-macros {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    align-items: center;
    max-width: 100%;
    min-width: 0; /* Permite encolher */
}

.consumption-macro-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    min-width: 0; /* Permite que o item encolha */
}

.consumption-macro-item .macro-emoji {
    font-size: 1.5rem;
    line-height: 1;
    margin-bottom: 2px;
}

.consumption-macro-item .macro-progress-bar {
    width: 100%;
    max-width: 30px; /* Largura bem reduzida */
    height: 5px; /* Aumentado de 4px para 5px */
    background: rgba(255, 255, 255, 0.08);
    border-radius: 2px;
    overflow: hidden;
    margin: 0 auto; /* Centraliza a barra */
}

.consumption-macro-item .macro-progress-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.6s ease;
}

.consumption-macro-item .macro-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-primary);
    text-transform: capitalize;
    text-align: center;
    margin-top: 2px;
}

.consumption-macro-item .macro-value {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--text-primary);
    text-align: center;
}

.consumption-macro-item .macro-value .macro-goal {
    color: var(--text-secondary);
    font-weight: 400;
}

.consumption-macro-item.carbs .macro-progress-fill {
    background: linear-gradient(90deg, #4FC3F7, #29B6F6);
}

.consumption-macro-item.protein .macro-progress-fill {
    background: linear-gradient(90deg, #66BB6A, #43A047);
}

.consumption-macro-item.fat .macro-progress-fill {
    background: linear-gradient(90deg, #FFA726, #FB8C00);
}

/* Responsividade - Mant√©m layout horizontal, apenas reduz tamanhos */
@media (max-width: 480px) {
    .card-consumption .consumption-content {
        gap: 12px; /* Gap menor em mobile */
    }
    
    .consumption-calories-circle {
        width: 80px;
        height: 80px;
        flex-shrink: 0;
    }
    
    .consumption-calories-circle .emoji {
        font-size: 1.2rem;
    }
    
    .consumption-calories-circle .calories-value {
        font-size: 0.9rem;
    }
    
    .consumption-calories-circle .calories-label {
        font-size: 0.55rem;
    }

    .consumption-macros {
        gap: 8px; /* Gap menor entre macros */
    }
    
    .consumption-macro-item .macro-emoji {
        font-size: 1.2rem;
    }
    
    .consumption-macro-item .macro-name {
        font-size: 0.65rem;
    }
    
    .consumption-macro-item .macro-value {
        font-size: 0.7rem;
    }
    
    .consumption-macro-item .macro-progress-bar {
        max-width: 25px; /* Barra ainda menor em mobile */
        height: 4px; /* Aumentado de 3px para 4px */
    }
}

@media (max-width: 360px) {
    .card-consumption .consumption-content {
        gap: 8px;
    }
    
    .consumption-calories-circle {
        width: 70px;
        height: 70px;
    }
    
    .consumption-calories-circle .emoji {
        font-size: 1rem;
    }
    
    .consumption-calories-circle .calories-value {
        font-size: 0.8rem;
    }
    
    .consumption-calories-circle .calories-label {
        font-size: 0.5rem;
    }

    .consumption-macros {
        gap: 6px;
    }
    
    .consumption-macro-item .macro-progress-bar {
        max-width: 20px;
        height: 4px;
    }
}

/* ======================================================= */
/* --- CSS DAS MISS√ïES --- */
/* ======================================================= */

.card-missions .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--glass-border);
}
.card-missions .view-all-link {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.2s ease;
}
.card-missions .view-all-link:hover { color: var(--accent-orange); }

.missions-progress {display: flex;flex-direction: column;gap: 8px;}
.missions-progress-info {display: flex;justify-content: space-between;align-items: center;font-size: 0.9rem;color: var(--text-secondary);}
.missions-progress-info span:first-child {font-weight: 600;color: var(--text-primary);}
.progress-bar-missions {width: 100%;height: 6px;background-color: rgba(255, 255, 255, 0.1);border-radius: 3px;overflow: hidden;}
.progress-bar-missions-fill {height: 100%;border-radius: 3px;background-image: var(--primary-orange-gradient);transition: width 0.5s ease-in-out;}

.missions-carousel-container {
    position: relative;
    min-height: 180px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: visible;
}
.missions-carousel-container.has-completion {
    min-height: 100px;
    padding-top: 0;
    padding-bottom: 5px;
}
.mission-slide {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    transform: scale(0.95);
    transition: opacity 0.4s ease, transform 0.4s ease;
    justify-content: space-between;
    padding: 10px 0;
}
.mission-slide.active {opacity: 1; transform: scale(1); z-index: 10;}
.mission-slide.completion-message {
    justify-content: center;
    padding-top: 10px;
    padding-bottom: 10px;
    align-items: center;
    top: 0;
}
.mission-slide.completion-message .mission-details {
    margin-bottom: 0;
}
.mission-icon i {
    background: var(--primary-orange-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 2.5rem;
}
.mission-details {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    width: 100%;
}
.mission-details h4 {font-size: 1.1rem; font-weight: 600;color: var(--text-primary);margin: 0 0 4px 0;}
.mission-details span {font-size: 0.9rem; font-weight: 500;color: #4CAF50;}
.mission-duration-display {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 500;
    margin-top: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.3s ease;
}
.mission-actions {display: flex;gap: 20px;width: 100%;justify-content: center;}
.mission-action-btn {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    border: none;
    font-size: 1.6rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}
.mission-action-btn.skip-btn {background-color: rgba(255, 255, 255, 0.1);color: var(--text-secondary);}
.mission-action-btn.skip-btn:hover {background-color: rgba(255, 255, 255, 0.15);}
.mission-action-btn.complete-btn {background-image: var(--primary-orange-gradient);color: var(--text-primary);}
.mission-action-btn.complete-btn:hover {filter: brightness(1.1);}
.mission-action-btn.duration-btn {background-color: rgba(255, 193, 7, 0.2);color: #ffc107;border: 1px solid rgba(255, 193, 7, 0.3);}
.mission-action-btn.duration-btn:hover {background-color: rgba(255, 193, 7, 0.3);}
.mission-action-btn.duration-btn:focus {outline: none;box-shadow: none;}
.mission-action-btn.complete-btn.disabled {opacity: 0.5;cursor: not-allowed;filter: none;}
.mission-action-btn.complete-btn.disabled:hover {filter: none;}
.mission-action-btn.complete-btn.disabled:focus {outline: none;box-shadow: none;}
.completion-message .mission-icon {
    margin-top: 8px;
    margin-bottom: 10px;
    padding-top: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}
.completion-message .mission-icon i { 
    font-size: 2.4rem; 
    margin-bottom: 0;
    display: block;
    line-height: 1;
    background: none !important;
    -webkit-background-clip: unset !important;
    -webkit-text-fill-color: var(--accent-orange) !important;
    color: var(--accent-orange) !important;
}
.completion-message .mission-details {
    margin-bottom: 8px;
}
.completion-message h4 { 
    font-size: 1.1rem; 
    margin-top: 0;
    margin-bottom: 4px;
}
.completion-message p {
    font-size: 0.9rem;
    margin: 0;
}

/* CSS CARROSSEL DE SUGEST√ïES */
.suggestions-carousel {padding: 0 24px;scroll-padding: 0 24px;}
.suggestions-carousel .suggestion-item:last-child {margin-right: 24px;}
.card-suggestions .card-header {padding: 0 24px;}

/* ======================================= */
/* --- CSS DO CARD DE DESAFIOS --- */
/* ======================================= */
.card-challenges {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.card-challenges .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--glass-border);
}

.card-challenges .card-header h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
}

.card-challenges .card-header h3 i {
    color: var(--accent-orange);
}

.challenges-empty-state {
    text-align: center;
    padding: 40px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
}

.challenges-empty-state .empty-state-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: rgba(255, 107, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 8px auto; /* Centralizado horizontalmente */
    position: relative; /* Para centraliza√ß√£o perfeita do √≠cone */
}

.challenges-empty-state .empty-state-icon i {
    font-size: 2.5rem;
    color: var(--accent-orange);
    position: absolute; /* Centraliza√ß√£o perfeita */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    line-height: 1; /* Remove espa√ßamento extra */
}

.challenges-empty-state h4 {
    margin: 0;
    font-size: 1.2rem;
    color: var(--text-primary);
    font-weight: 600;
}

.challenges-empty-state p {
    margin: 0 auto;
    font-size: 0.95rem;
    color: var(--text-secondary);
    line-height: 1.6;
    max-width: 400px;
    text-align: center;
}

.challenges-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.challenge-item {
    padding: 16px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.03);
    text-decoration: none;
    color: var(--text-primary);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.challenge-item:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: var(--accent-orange);
    transform: translateY(-2px);
}

.challenge-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
}

.challenge-item-header h4 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    flex: 1;
}

.challenge-status {
    font-size: 0.85rem;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.05);
    white-space: nowrap;
}

.challenge-description {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-secondary);
    line-height: 1.5;
}

.challenge-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.challenge-meta span {
    display: flex;
    align-items: center;
    gap: 6px;
}

.challenge-meta i {
    color: var(--accent-orange);
    font-size: 0.9rem;
}

.challenge-progress {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.challenge-progress-info {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.progress-bar-challenge {
    width: 100%;
    height: 6px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
}

.progress-bar-challenge-fill {
    height: 100%;
    border-radius: 3px;
    background-image: var(--primary-orange-gradient);
    transition: width 0.5s ease-in-out;
}

.challenge-goals-preview {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 4px;
}

.challenge-goal-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 16px;
    background: rgba(255, 107, 0, 0.1);
    border: 1px solid rgba(255, 107, 0, 0.2);
    font-size: 0.8rem;
    color: var(--text-primary);
    font-weight: 500;
}

.challenge-goal-badge i {
    color: var(--accent-orange);
    font-size: 0.85rem;
}

/* ======================================= */
/* --- CSS DO CARD DE RANKING --- */
/* ======================================= */
.card-ranking {
    grid-column: 1 / -1;
    padding: 15px;
}

.ranking-link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    text-decoration: none;
    color: var(--text-primary);
}

.player-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    width: 60px;
    text-align: center;
}

.player-info .player-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background-color: var(--surface-color);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.player-info .player-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.player-info .player-avatar i {
    color: var(--accent-orange);
    font-size: 1.5rem;
}

.player-info span {
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
}

.clash-center {
    flex-grow: 1;
    text-align: center;
    padding: 0 15px;
}

.clash-title {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    display: block;
}

.clash-title.winner {
    color: #FFAE00;
    font-weight: 600;
}

.rank-position {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 8px;
    display: block;
}

.progress-bar {
    width: 100%;
    height: 6px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
    margin: 8px 0;
}

.progress-bar-fill {
    height: 100%;
    border-radius: 3px;
    background-image: var(--primary-orange-gradient);
    transition: width 0.5s ease-in-out;
}
.points-popup {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    padding: 16px 24px;
    border-radius: 16px;
    font-size: 1rem;
    font-weight: 600;
    z-index: 2000;
    opacity: 0;
    animation: pointsPopupAnimation 2.5s ease-in-out forwards;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    display: flex;
    align-items: center;
    gap: 12px;
}

.points-popup .star-icon {
    font-size: 1.2rem;
    color: var(--accent-orange);
    animation: starPulse 1s ease-in-out infinite;
}

@keyframes pointsPopupAnimation {
    0% { 
        opacity: 0; 
        transform: translate(-50%, 20px); 
    } 
    20% { 
        opacity: 1; 
        transform: translate(-50%, 0); 
    }
    80% { 
        opacity: 1; 
        transform: translate(-50%, 0); 
    } 
    100% { 
        opacity: 0; 
        transform: translate(-50%, -20px); 
    }
}

/* Popup de Congratula√ß√£o do Check-in */
.checkin-congrats-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(30, 30, 30, 0.95);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(255, 107, 0, 0.3);
    color: var(--text-primary);
    padding: 2rem 2.5rem;
    border-radius: 20px;
    font-size: 1rem;
    font-weight: 600;
    z-index: 999999 !important;
    opacity: 0;
    animation: congratsPopupAnimation 3.5s ease-in-out forwards;
    pointer-events: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 107, 0, 0.1);
    text-align: center;
    min-width: 300px;
    max-width: 90%;
}

.checkin-congrats-popup .congrats-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--accent-orange);
    animation: congratsIconPulse 1.5s ease-in-out infinite;
    display: block;
}

.checkin-congrats-popup .congrats-message {
    font-size: 1.25rem;
    margin-bottom: 0.75rem;
    font-weight: 700;
    color: var(--text-primary);
}

.checkin-congrats-popup .congrats-subtitle {
    font-size: 0.95rem;
    color: var(--text-secondary);
    margin-bottom: 1.25rem;
    font-weight: 400;
}

.checkin-congrats-popup .congrats-points {
    font-size: 1.5rem;
    margin-top: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    color: var(--accent-orange);
    font-weight: 700;
}

.checkin-congrats-popup .congrats-points .star-icon {
    font-size: 1.25rem;
    color: var(--accent-orange);
    animation: starPulse 1s ease-in-out infinite;
}

@keyframes congratsPopupAnimation {
    0% { 
        opacity: 0; 
        transform: translate(-50%, -50%) scale(0.85); 
    } 
    10% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1.02); 
    }
    20% { 
        transform: translate(-50%, -50%) scale(1); 
    }
    80% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1); 
    } 
    100% { 
        opacity: 0; 
        transform: translate(-50%, -50%) scale(0.95); 
    }
}

@keyframes congratsIconPulse {
    0%, 100% { 
        transform: scale(1); 
    } 
    50% { 
        transform: scale(1.15); 
    }
}

@keyframes starPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

/* CSS simples: apenas esconder completados */
.mission-slide[data-completed="1"] {
    display: none !important;
}

/* Anima√ß√£o da estrela voando para o badge - Estilo Videogame */
.flying-star {
    position: fixed;
    z-index: 999998 !important;
    pointer-events: none;
    font-size: 1.5rem;
    color: var(--accent-orange);
    opacity: 1;
    transition: none;
    will-change: transform, opacity;
    filter: drop-shadow(0 0 8px rgba(255, 107, 0, 0.8));
    left: 0;
    top: 0;
    transform-origin: center center;
}

.flying-star.animate {
    /* A anima√ß√£o ser√° controlada via JavaScript com requestAnimationFrame */
    /* CSS apenas para estilo base */
}

/* Anima√ß√£o de pulso no badge quando recebe pontos */
.points-counter-badge.points-updated {
    animation: badgePulse 1.2s ease-out;
}

@keyframes badgePulse {
    0% {
        transform: scale(1);
        border-color: var(--border-color);
    }
    20% {
        transform: scale(1.15);
        border-color: var(--accent-orange);
        box-shadow: 0 0 25px rgba(255, 107, 0, 0.5);
    }
    40% {
        transform: scale(1.1);
        border-color: var(--accent-orange);
        box-shadow: 0 0 30px rgba(255, 107, 0, 0.6);
    }
    60% {
        transform: scale(1.05);
        border-color: var(--accent-orange);
        box-shadow: 0 0 20px rgba(255, 107, 0, 0.4);
    }
    100% {
        transform: scale(1);
        border-color: var(--border-color);
    }
}

/* Anima√ß√£o de contagem dos pontos */
.points-counter-badge span.points-counting {
    animation: pointsCount 1.5s ease-out;
    color: var(--accent-orange);
    font-weight: 700;
}

@keyframes pointsCount {
    0% {
        transform: scale(1);
    }
    30% {
        transform: scale(1.4);
    }
    60% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}

/* Modal de Sono */

/* Bot√£o de sono - ID√äNTICO ao duration-btn */
.mission-action-btn.sleep-btn {
    background-color: rgba(255, 193, 7, 0.2);
    color: #ffc107;
    border: 1px solid rgba(255, 193, 7, 0.3);
}

.mission-action-btn.sleep-btn:hover {
    background-color: rgba(255, 193, 7, 0.3);
}

.mission-action-btn.sleep-btn:focus {
    outline: none;
    box-shadow: none;
}
</style>

    </style>
    <div class="fixed-background"></div>
    <div id="alert-container"></div>
    
    <div class="app-container" id="dashboard-container" style="display: none;">
        <header class="header">
            <div class="header-actions">
                <a href="./points_history.html" class="points-counter-badge"><i class="fas fa-star"></i><span id="user-points-display">0</span></a>
                <a href="./edit_profile.html" class="profile-icon" id="profile-icon-link">
                    <i class="fas fa-user"></i>
                </a>
            </div>
        </header>

    <section class="main-carousel">
        <!-- Trilho m√≥vel que cont√©m todos os slides -->
        <div class="carousel-track">
            <div class="lottie-slide" data-link="./explore_recipes.html">
                <div class="lottie-animation-container"></div>
            </div>
            <div class="lottie-slide" data-link="#">
                <div class="lottie-animation-container"></div>
            </div>
            <div class="lottie-slide" data-link="./routine.html">
                <div class="lottie-animation-container"></div>
            </div>
            <div class="lottie-slide" data-link="./progress.html">
                <div class="lottie-animation-container"></div>
            </div>
        </div>
        
        <div class="pagination-container"></div>
</section>

    <section class="dashboard-grid">
        <div class="glass-card card-ranking" id="ranking-card" style="display: none;"><a href="./ranking.html" class="ranking-link">
            <div class="player-info left">
                <div class="player-avatar" id="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <span>Voc√™</span>
            </div>
            <div class="clash-center">
                <span class="clash-title" id="clash-title">Disputa de Pontos</span>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="ranking-progress-bar" style="width: 0%;"></div>
                </div>
                <span class="rank-position">Sua Posi√ß√£o: <strong id="my-rank">-</strong></span>
            </div>
            <div class="player-info right" id="opponent-info">
                <div class="player-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <span id="opponent-name">-</span>
            </div>
        </a></div>
        
        <div class="glass-card card-weight" id="weight-card">
            <span>Carregando...</span>
        </div>

        <div class="glass-card card-hydration" id="water-card">
            <div class="hydration-content">
                <div class="hydration-info">
                    <h3>Hidrata√ß√£o</h3>
                    <div class="water-status" id="water-status-display">
                        <span id="water-amount-display">0</span> / <span id="water-goal-display">0 ml</span>
                    </div>
                    <div class="water-controls">
                        <div class="water-input-row">
                            <button type="button" id="water-remove-btn" class="circle-btn" aria-label="Remover">‚àí</button>
                            <button type="button" id="water-add-btn" class="circle-btn accent" aria-label="Adicionar">+</button>
                        </div>
                        <div class="inline-input-row">
                            <input type="number" id="water-amount-input" class="water-number-input" min="0" step="10" value="" placeholder="EX: 250" aria-label="Quantidade consumida">
                            <div class="water-select-wrapper">
                                <select id="water-unit-select" class="water-select" aria-label="Unidade">
                                    <option value="ml" selected>ML</option>
                                    <option value="l">L</option>
                                </select>
                                <i class="fas fa-chevron-down water-select-arrow"></i>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="water-drop-container-svg">
                    <svg id="animated-water-drop" width="160" height="160" viewBox="0 0 275.785 275.785" xml:space="preserve">
                        <defs>
                            <clipPath id="drop-mask">
                                <!-- CORRE√á√ÉO: Usando o mesmo caminho do contorno para o clipPath para evitar vazamentos -->
                                <path d="M137.893,9.223 c14.177,18.895,91.267,123.692,91.267,169.701c0,50.31-40.952,91.255-91.267,91.255c-50.324,0-91.268-40.945-91.268-91.255 C46.625,132.915,123.712,28.118,137.893,9.223z"/>
                            </clipPath>
                            <linearGradient id="water-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" stop-color="#4fc3f7" />
                                <stop offset="80%" stop-color="#1976d2" />
                            </linearGradient>
                            <!-- RESTAURADO: Filtro de glow para a √°gua -->
                            <filter id="water-glow" x="-30%" y="-30%" width="160%" height="160%">
                                <feGaussianBlur stdDeviation="4" result="blur" />
                                <feComposite in="SourceGraphic" in2="blur" operator="over" />
                            </filter>
                        </defs>
                        <g clip-path="url(#drop-mask)">
                            <!-- RESTAURADO: Grupo com filtro de glow e que ser√° movido pelo JS -->
                            <g id="water-level-group" transform="translate(0, 275.785)" filter="url(#water-glow)">
                                <!-- RESTAURADO: Ondas animadas em vez de um ret√¢ngulo est√°tico -->
                                <path id="wave1" d="M -400 10 C -300 15, -300 5, -200 10 C -100 15, -100 5, 0 10 C 100 15, 100 5, 200 10 C 300 15, 300 5, 400 10 L 400 280 H -400 Z" fill="url(#water-gradient)" opacity="0.9"/>
                                <path id="wave2" d="M -400 5 C -300 10, -300 0, -200 5 C -100 10, -100 0, 0 5 C 100 10, 100 0, 200 5 C 300 10, 300 0, 400 5 L 400 280 H -400 Z" fill="url(#water-gradient)" opacity="0.7"/>
                            </g>
                        </g>
                        <!-- Contorno da gota -->
                        <path d="M137.893,9.223 c14.177,18.895,91.267,123.692,91.267,169.701c0,50.31-40.952,91.255-91.267,91.255c-50.324,0-91.268-40.945-91.268-91.255 C46.625,132.915,123.712,28.118,137.893,9.223z" stroke="rgba(255, 255, 255, 0.4)" stroke-width="8" fill="none"/>
                    </svg>
                </div>
            </div>
        </div>
        
        <div class="glass-card card-consumption">
            <div class="card-header">
                <h3>Seu Consumo Hoje</h3>
                <a href="./dashboard.html" class="view-all-link">Minha Meta</a>
            </div>
            <div class="consumption-content">
                <!-- C√≠rculo de Calorias (Esquerda) -->
                <div class="consumption-calories">
                    <div class="consumption-calories-circle" id="kcal-circle">
                        <svg viewBox="0 0 40 40" class="circular-chart" preserveAspectRatio="xMidYMid meet" style="overflow: visible;">
                            <defs>
                                <linearGradient id="orange-gradient-consumption" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" stop-color="#FFAE00" />
                                    <stop offset="100%" stop-color="#F83600" />
                                </linearGradient>
                            </defs>
                            <circle class="circle-bg" cx="20" cy="20" r="15.9155" />
                            <circle class="circle" cx="20" cy="20" r="15.9155" stroke="url(#orange-gradient-consumption)" />
                        </svg>
                        <div class="circle-content">
                            <div class="emoji">üî•</div>
                            <div class="calories-value" id="kcal-value-display">0</div>
                            <div class="calories-label">kcal</div>
                        </div>
                    </div>
                </div>
                
                <!-- Macros (Direita) - Layout Horizontal -->
                <div class="consumption-macros">
                    <!-- Carboidratos -->
                    <div class="consumption-macro-item carbs">
                        <div class="macro-emoji">üçû</div>
                        <div class="macro-progress-bar">
                            <div class="macro-progress-fill" id="carbs-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="macro-name">Carbo</div>
                        <div class="macro-value">
                            <span id="carbs-value-display">0</span>g / <span class="macro-goal"><span id="carbs-goal-display">0</span>g</span>
                        </div>
                    </div>
                    
                    <!-- Prote√≠nas -->
                    <div class="consumption-macro-item protein">
                        <div class="macro-emoji">ü•©</div>
                        <div class="macro-progress-bar">
                            <div class="macro-progress-fill" id="protein-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="macro-name">Prote√≠na</div>
                        <div class="macro-value">
                            <span id="protein-value-display">0</span>g / <span class="macro-goal"><span id="protein-goal-display">0</span>g</span>
                        </div>
                    </div>
                    
                    <!-- Gorduras -->
                    <div class="consumption-macro-item fat">
                        <div class="macro-emoji">üßà</div>
                        <div class="macro-progress-bar">
                            <div class="macro-progress-fill" id="fat-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="macro-name">Gordura</div>
                        <div class="macro-value">
                            <span id="fat-value-display">0</span>g / <span class="macro-goal"><span id="fat-goal-display">0</span>g</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-card card-missions" id="missions-card" style="display: none;">
            <div class="card-header">
                <h3>Jornada Di√°ria</h3>
                <a href="./routine.html" class="view-all-link">Ver mais</a>
            </div>
            <div class="missions-progress">
                <div class="missions-progress-info">
                    <span>Progresso</span>
                    <span id="missions-progress-text">0 de 0</span>
                </div>
                <div class="progress-bar-missions"><div class="progress-bar-missions-fill" id="missions-progress-bar" style="width: 0%;"></div></div>
            </div>
            
            <div class="missions-carousel-container" id="missions-carousel">
                <!-- Miss√µes ser√£o renderizadas via JavaScript -->
            </div>
        </div>
        
        <!-- Modal de Sono (inicialmente oculto) -->
        <div class="modal-overlay" id="sleep-modal-main">
            <div class="modal-content glass-card">
                <h2>üò¥ Registrar Sono</h2>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="sleep-time-main">Hora que deitou:</label>
                        <input type="time" id="sleep-time-main" class="time-input" value="22:00">
                    </div>
                    <div class="form-group">
                        <label for="wake-time-main">Hora que acordou:</label>
                        <input type="time" id="wake-time-main" class="time-input" value="07:00">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="primary-button secondary-button" data-action="close-modal">Cancelar</button>
                    <button type="button" class="primary-button" id="confirm-sleep-main">Registrar Sono</button>
                </div>
            </div>
        </div>
        
        <div class="glass-card card-meal-cta" id="meal-cta-card">
            <i class="fas fa-utensils"></i>
            <h2>Carregando...</h2>
            <p>O que voc√™ vai comer agora?</p>
            <a href="#" class="primary-button" id="add-meal-btn">Adicionar Refei√ß√£o</a>
        </div>
        
        <div class="card-suggestions" id="suggestions-card" style="display: none;">
            <div class="card-header">
                <h3 id="suggestions-title">Sugest√µes</h3>
                <a href="#" class="view-all-link" id="suggestions-view-all">Ver mais</a>
            </div>
            <div class="carousel-wrapper">
                <div class="suggestions-carousel" id="suggestions-carousel">
                    <!-- Receitas ser√£o renderizadas via JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Card de Grupos de Desafio -->
        <div class="glass-card card-challenges" id="challenges-card" style="display: none;">
            <div class="card-header">
                <h3><i class="fas fa-trophy"></i> Grupos de Desafio</h3>
                <a href="./dashboard.html" class="view-all-link" id="challenges-view-all" style="display: none;">Ver todos</a>
            </div>
            
            <div class="challenges-empty-state" id="challenges-empty-state" style="display: none;">
                <div class="empty-state-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h4>Nenhum grupo de desafio</h4>
                <p>Voc√™ n√£o foi adicionado(a) em nenhum grupo de desafios. Consulte seu nutricionista para mais informa√ß√µes.</p>
            </div>
            
            <div class="challenges-list" id="challenges-list">
                <!-- Desafios ser√£o renderizados via JavaScript -->
            </div>
        </div>
        
    </section>
</div>

<div class="modal-overlay" id="edit-weight-modal">
    <div class="modal-content glass-card">
        <h2>Atualizar seu Peso</h2>
        <div class="modal-body">
            <div class="form-group">
                <label for="new-weight-input">Novo peso (kg)</label>
                <input type="number" id="new-weight-input" class="form-input" placeholder="Ex: 75.5" step="0.1" value="">
                <small id="weight-error-message" class="error-message" style="display: none;"></small>
            </div>
            <div class="modal-actions">
                <button type="button" class="primary-button secondary-button" data-action="close-modal">Cancelar</button>
                <button id="save-weight-btn" class="primary-button">Salvar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para dura√ß√£o de exerc√≠cio -->
<div class="modal-overlay" id="exercise-duration-modal">
    <div class="modal-content glass-card">
        <h2>‚è±Ô∏è Dura√ß√£o do Exerc√≠cio</h2>
        <div class="modal-body">
            <div class="form-group">
                <label for="exercise-duration-input">Quanto tempo durou o exerc√≠cio?</label>
                <div class="duration-input-group">
                    <input type="number" id="exercise-duration-input" class="form-input" placeholder="Ex: 45" min="15" max="300" value="60">
                    <span class="duration-unit">minutos</span>
                </div>
                <small class="form-help">Entre 15 e 300 minutos</small>
            </div>
            <div class="modal-actions">
                <button type="button" class="primary-button secondary-button" data-action="close-modal">Cancelar</button>
                <button type="button" class="primary-button" id="confirm-exercise-duration">Confirmar</button>
            </div>
        </div>
    </div>
</div>

    <!-- Bot√£o Flutuante de Check-in -->
    <button class="checkin-floating-btn" id="checkin-floating-btn" onclick="openCheckinModal()" aria-label="Abrir Check-in" style="display: none;">
        <i class="fas fa-comments"></i>
    </button>
    
    <!-- Bottom Navigation (via JavaScript - funciona como include) -->

<style>
/* Check-in Floating Button */
.checkin-floating-btn {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: rgba(255, 107, 0, 0.2);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 107, 0, 0.4);
    color: #FF6B00;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(255, 107, 0, 0.25),
                0 2px 8px rgba(0, 0, 0, 0.2),
                0 0 0 0 rgba(255, 107, 0, 0.4);
    transition: all 0.3s ease;
    z-index: 999;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: float-gentle 3s ease-in-out infinite;
}

#dashboard-container.app-container {
    padding-bottom: calc(100px + env(safe-area-inset-bottom, 0px));
}

@keyframes float-gentle {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-8px);
    }
}

.checkin-floating-btn:hover {
    background: rgba(255, 107, 0, 0.3);
    border-color: rgba(255, 107, 0, 0.6);
    animation: none;
    transform: translateY(-4px);
    box-shadow: 0 6px 24px rgba(255, 107, 0, 0.35),
                0 4px 12px rgba(0, 0, 0, 0.25),
                0 0 0 2px rgba(255, 107, 0, 0.2);
}

.checkin-floating-btn:active {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(255, 107, 0, 0.3),
                0 2px 8px rgba(0, 0, 0, 0.2),
                0 0 0 1px rgba(255, 107, 0, 0.15);
}

@media (max-width: 768px) {
    .checkin-floating-btn {
        bottom: calc(80px + env(safe-area-inset-bottom));
        right: 16px;
        width: 60px;
        height: 60px;
        font-size: 22px;
    }
}

@media (min-width: 769px) {
    .checkin-floating-btn {
        bottom: 100px;
    }
}

/* Check-in Modal (Clean Glassmorphism Style) */
.checkin-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    z-index: 10000;
    align-items: center;
    justify-content: center;
    padding: calc(12px + env(safe-area-inset-top, 0px)) 12px env(safe-area-inset-bottom, 0px);
    overflow: hidden;
    /* Garantir que cliques no background funcionem */
    cursor: pointer;
    touch-action: auto;
}

.checkin-chat-container {
    width: 100%;
    max-width: 500px;
    height: 90vh;
    max-height: calc(800px + env(safe-area-inset-bottom, 0px));
    background: rgba(30, 30, 30, 0.4);
    backdrop-filter: blur(50px);
    -webkit-backdrop-filter: blur(50px);
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.15);
    position: relative;
    z-index: 1;
    margin: 0 auto;
    /* Prevenir que cliques no container fechem o modal */
    cursor: default;
    pointer-events: auto;
    /* Permitir gestos padr√£o (scroll) dentro do container */
    touch-action: auto;
}

.checkin-chat-header {
    background: rgba(30, 30, 30, 0.4);
    backdrop-filter: blur(50px);
    -webkit-backdrop-filter: blur(50px);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    z-index: 10;
    flex-shrink: 0; /* Prevent header from shrinking */
}

.checkin-chat-header h3 {
    margin: 0;
    color: #FFFFFF;
    font-size: 1.1rem;
    font-weight: 600;
}

.checkin-close-btn {
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.6);
    font-size: 1.3rem;
    cursor: pointer;
    padding: 0;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
    line-height: 1;
    font-weight: 300;
    position: relative;
    z-index: 10001;
    pointer-events: auto;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
}

.checkin-close-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: rgba(255, 255, 255, 0.9);
}

.checkin-close-btn:active {
    background: rgba(255, 255, 255, 0.15);
    transform: scale(0.95);
}

.checkin-messages {
    flex: 1 1 auto;
    overflow-y: scroll !important;
    overflow-x: hidden;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    background: rgba(30, 30, 30, 0.4);
    backdrop-filter: blur(50px);
    -webkit-backdrop-filter: blur(50px);
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
    /* Touch scrolling - ESSENCIAL para mobile */
    -webkit-overflow-scrolling: touch !important;
    touch-action: pan-y !important;
    overscroll-behavior: contain;
    will-change: scroll-position;
    min-height: 0;
    position: relative;
    z-index: 2;
    /* Force hardware acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    /* Garantir que o elemento seja scroll√°vel */
    height: 100%;
    /* Permitir eventos de touch */
    pointer-events: auto;
    -webkit-user-select: none;
    user-select: none;
}

.checkin-messages::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

.checkin-message {
    max-width: 75%;
    padding: 12px 16px;
    border-radius: 8px;
    word-wrap: break-word;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.checkin-message.bot {
    align-self: flex-start;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    color: #FFFFFF;
    border-radius: 18px;
    border-bottom-left-radius: 4px;
}

.checkin-message.user {
    align-self: flex-end;
    background: #FF6B00;
    color: #FFFFFF;
    font-weight: 500;
    border-radius: 18px;
    border-bottom-right-radius: 4px;
}

.checkin-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 8px;
}

.checkin-option-btn {
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    color: #FFFFFF;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
    font-size: 0.95rem;
    font-weight: 400;
}

.checkin-option-btn:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.12);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
}

.checkin-option-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.checkin-input-container {
    padding: 16px;
    padding-bottom: 16px;
    background: rgba(30, 30, 30, 0.4);
    backdrop-filter: blur(50px);
    -webkit-backdrop-filter: blur(50px);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    gap: 12px;
    align-items: center;
    flex-shrink: 0; /* Prevent input container from shrinking */
    position: relative;
    z-index: 10;
}

body.checkin-modal-open .checkin-input-container {
    padding-bottom: 16px;
}

.checkin-text-input {
    flex: 1;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 24px;
    color: #FFFFFF;
    font-size: 0.95rem;
    outline: none;
    font-family: inherit;
    transition: all 0.2s ease;
}

.checkin-text-input:focus {
    border-color: rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.1);
}

.checkin-text-input:disabled {
    background: rgba(255, 255, 255, 0.03);
    color: rgba(255, 255, 255, 0.4);
    cursor: not-allowed;
    opacity: 0.6;
    border-color: rgba(255, 255, 255, 0.05);
}

.checkin-text-input::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

.checkin-send-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(255, 107, 0, 0.2);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 107, 0, 0.3);
    color: #FF6B00;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
    padding: 0;
    margin: 0;
}

.checkin-send-btn i {
    font-size: 1rem;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}

.checkin-send-btn:hover:not(:disabled) {
    background: rgba(255, 107, 0, 0.3);
    border-color: rgba(255, 107, 0, 0.5);
    color: #FF8533;
    transform: scale(1.05);
}

.checkin-send-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    transform: none;
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.3);
}
</style>

<!-- Check-in Modal -->
<div class="checkin-modal" id="checkinModal" style="display: none;">
    <div class="checkin-chat-container">
        <div class="checkin-chat-header">
            <h3 id="checkin-title">Check-in</h3>
            <button class="checkin-close-btn" onclick="closeCheckinModal()">&times;</button>
        </div>
        <div class="checkin-messages" id="checkinMessages"></div>
        <div class="checkin-input-container" id="checkinInputContainer">
            <input type="text" class="checkin-text-input" id="checkinTextInput" placeholder="Digite sua resposta..." onkeypress="if(event.key === 'Enter') sendCheckinResponse()" disabled>
            <button class="checkin-send-btn" onclick="sendCheckinResponse()" id="checkinSendBtn" disabled>
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
</div>

<!-- Scripts do carrossel de banners -->


</div>


<script src="/https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
<script src="/www-config.js"></script>
<script src="/assets/js/auth.js"></script>
<script src="/assets/js/banner-carousel.js"></script>
<script src="/assets/js/pages/main_app/main_app_inline_0.js"></script>
<script src="/assets/js/pages/main_app/main_app_inline_1.js"></script>
<script src="/assets/js/pages/main_app/main_app_inline_2.js"></script>
<script src="/assets/js/pages/main_app/main_app_inline_3.js"></script>
<script src="/assets/js/pages/main_app/main_app_inline_4.js"></script>
