<div class="app-container">
    <section class="measurements-page-grid">
        <!-- Header da página -->
        <header class="page-header">
            <a href="./progress.html" class="back-button">
                <i class="fas fa-chevron-left"></i>
            </a>
            <h1>Fotos e Medidas</h1>
        </header>
        
        <div id="alert-messages"></div>

        <!-- Formulário para novos registros -->
        <form id="measurements-form" class="measurements-form">
            <!-- Data do Registro -->
            <div class="form-section">
                <div class="form-group">
                    <label for="date_recorded"><i class="fas fa-calendar-alt"></i> Data do Registro</label>
                    <div class="date-input-wrapper">
                        <input type="date" id="date_recorded" name="date_recorded" class="form-control">
                    </div>
                    <div style="margin-top: 6px; font-size: 0.8rem; color: var(--text-secondary);">
                        <i class="fas fa-info-circle"></i> Não é possível registrar fotos com data futura.
                    </div>
                </div>
            </div>

            <!-- Fotos de Progresso -->
            <div class="form-section">
                <h3 class="section-title"><i class="fas fa-camera"></i> Fotos de Progresso</h3>
                <div class="photos-grid">
                    <div class="photo-upload">
                        <input type="file" name="photo_front" id="photo_front" accept="image/*">
                        <label for="photo_front" class="upload-content">
                            <div class="photo-preview" id="frontPreview">
                                <div class="upload-icon"><i class="fas fa-camera"></i></div>
                                <div class="upload-label">Frente</div>
                                <div class="upload-hint">Toque para adicionar</div>
                            </div>
                        </label>
                        <div class="photo-crop-controls" id="frontCropControls" style="display: none;">
                            <button type="button" class="remove-icon-btn" onclick="removePhoto('front')" title="Remover foto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="photo-upload">
                        <input type="file" name="photo_side" id="photo_side" accept="image/*">
                        <label for="photo_side" class="upload-content">
                            <div class="photo-preview" id="sidePreview">
                                <div class="upload-icon"><i class="fas fa-camera"></i></div>
                                <div class="upload-label">Lado</div>
                                <div class="upload-hint">Toque para adicionar</div>
                            </div>
                        </label>
                        <div class="photo-crop-controls" id="sideCropControls" style="display: none;">
                            <button type="button" class="remove-icon-btn" onclick="removePhoto('side')" title="Remover foto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="photo-upload">
                        <input type="file" name="photo_back" id="photo_back" accept="image/*">
                        <label for="photo_back" class="upload-content">
                            <div class="photo-preview" id="backPreview">
                                <div class="upload-icon"><i class="fas fa-camera"></i></div>
                                <div class="upload-label">Costas</div>
                                <div class="upload-hint">Toque para adicionar</div>
                            </div>
                        </label>
                        <div class="photo-crop-controls" id="backCropControls" style="display: none;">
                            <button type="button" class="remove-icon-btn" onclick="removePhoto('back')" title="Remover foto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Medidas Corporais -->
            <div class="form-section">
                <h3 class="section-title"><i class="fas fa-ruler"></i> Medidas Corporais</h3>
                <div class="measurements-grid">
                    <div class="form-group">
                        <label for="weight_kg"><i class="fas fa-weight"></i> Peso (kg)</label>
                        <input type="number" id="weight_kg" name="weight_kg" class="form-control" step="0.1" min="0" readonly style="background: rgba(255, 255, 255, 0.03); border-color: rgba(255, 255, 255, 0.08); color: rgba(255, 255, 255, 0.6); cursor: not-allowed;">
                        <div style="margin-top: 6px; font-size: 0.8rem; color: var(--text-secondary);">
                            <i class="fas fa-info-circle"></i> O peso é automaticamente puxado do seu perfil. Para alterar, edite seu perfil.
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="neck">Pescoço (cm)</label>
                        <input type="number" step="0.1" name="neck" id="neck" class="form-control" placeholder="Opcional">
                    </div>
                    <div class="form-group">
                        <label for="chest">Tórax (cm)</label>
                        <input type="number" step="0.1" name="chest" id="chest" class="form-control" placeholder="Opcional">
                    </div>
                    <div class="form-group">
                        <label for="waist">Cintura (cm)</label>
                        <input type="number" step="0.1" name="waist" id="waist" class="form-control" placeholder="Opcional">
                    </div>
                    <div class="form-group">
                        <label for="abdomen">Abdômen (cm)</label>
                        <input type="number" step="0.1" name="abdomen" id="abdomen" class="form-control" placeholder="Opcional">
                    </div>
                    <div class="form-group">
                        <label for="hips">Quadril (cm)</label>
                        <input type="number" step="0.1" name="hips" id="hips" class="form-control" placeholder="Opcional">
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary" id="submit-btn"><i class="fas fa-save"></i> Salvar Medidas e Fotos</button>
            </div>
        </form>

        <!-- Galeria de Fotos -->
        <div class="glass-card">
            <h3 class="section-title"><i class="fas fa-images"></i> Galeria de Fotos</h3>
            
            <div id="loading-state" style="text-align: center; padding: 40px 20px; color: var(--text-secondary);">
                <i class="fas fa-spinner fa-spin" style="font-size: 48px; margin-bottom: 16px;"></i>
                <p>Carregando galeria...</p>
            </div>
            
            <div id="empty-state" class="empty-state" style="display: none;">
                <div style="font-size: 3rem; margin-bottom: 16px;"><i class="fas fa-camera"></i></div>
                <h4 style="color: var(--text-primary); margin-bottom: 8px;">Nenhuma foto ainda</h4>
                <p>Adicione suas fotos acima para começar a acompanhar seu progresso!</p>
            </div>
            
            <div id="gallery-container" class="gallery-container" style="display: none;"></div>
        </div>
    </section>
</div>

<!-- Modal de Fotos -->
<div class="photo-modal" id="photo-modal">
    <div class="photo-modal-content">
        <div class="photo-modal-header">
            <div class="photo-modal-title">
                <h3 id="modal-photo-title"></h3>
                <span class="photo-modal-date" id="modal-photo-date"></span>
            </div>
            <button class="photo-modal-close" id="close-photo-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="photo-modal-body">
            <div class="photo-viewer">
                <button class="photo-nav-btn photo-prev" id="prev-photo">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="photo-container">
                    <img id="modal-photo-img" src="" alt="">
                </div>
                <button class="photo-nav-btn photo-next" id="next-photo">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <div class="photo-counter" id="photo-counter"></div>
            </div>
        </div>
        <div class="photo-modal-footer">
            <div class="photo-modal-info">
                <button class="delete-photo-btn-modal" id="delete-photo-btn">
                    <i class="fas fa-trash"></i>
                    Excluir Foto
                </button>
            </div>
        </div>
    </div>
</div>

