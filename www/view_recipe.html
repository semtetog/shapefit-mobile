<div class="app-container">
<style>
        body {
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        
        a, button, .btn, [role="button"] {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
    </style>
<style>
/* === VIEW RECIPE - ESTILO COMPLETO === */

/* === HEADER === */
.recipe-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.back-button {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
    text-decoration: none;
    transition: all 0.2s ease;
}

.back-button:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: translateX(-2px);
}

.recipe-action-favorite {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    text-decoration: none;
    transition: all 0.2s ease;
    cursor: pointer;
}

.recipe-action-favorite.is-favorited {
    background: var(--accent-orange) !important;
    border-color: var(--accent-orange) !important;
    color: #fff !important;
}

.recipe-action-favorite:hover {
    background: rgba(255, 255, 255, 0.08);
}

.recipe-action-favorite:focus {
    outline: none;
    background: rgba(255, 255, 255, 0.08);
}

.recipe-action-favorite.is-favorited:focus {
    background: var(--accent-orange) !important;
    border-color: var(--accent-orange) !important;
    color: #fff !important;
}

/* === GARANTIR QUE O FAVORITE_LOGIC.JS FUNCIONE === */
.favorite-toggle-btn {
    cursor: pointer !important;
    pointer-events: auto !important;
}

.favorite-toggle-btn i {
    pointer-events: none !important;
}

/* === FORÇAR ESTADO ATIVO DO FAVORITO === */
.favorite-toggle-btn.is-favorited {
    background: var(--accent-orange) !important;
    border-color: var(--accent-orange) !important;
    color: #fff !important;
}

.favorite-toggle-btn.is-favorited i {
    color: #fff !important;
}

.favorite-toggle-btn.is-favorited:hover {
    background: #ff7a1a !important;
    border-color: #ff7a1a !important;
}

.favorite-toggle-btn.is-favorited:focus {
    background: var(--accent-orange) !important;
    border-color: var(--accent-orange) !important;
    color: #fff !important;
}

/* === IMAGEM === */
.recipe-detail-image {
    width: 100%;
    height: 280px;
    object-fit: cover;
    border-radius: 20px;
    margin-bottom: 20px;
}

/* === CARD PRINCIPAL === */
.recipe-main-info {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 20px;
    transition: all 0.2s ease;
    overflow: hidden;
    word-wrap: break-word;
    overflow-wrap: break-word;
    box-sizing: border-box;
}

.recipe-main-info:hover {
    background: rgba(255, 255, 255, 0.06);
}

.recipe-name-main {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 12px 0;
    line-height: 1.2;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
    overflow: hidden;
}

.recipe-description-short {
    font-size: 16px;
    color: var(--text-secondary);
    line-height: 1.5;
    margin: 0 0 16px 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
    overflow: hidden;
}

.category-tags-container { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 8px; 
    margin-top: 0; 
}

.category-tag { 
    display: inline-block; 
    padding: 6px 12px; 
    background: rgba(255, 255, 255, 0.04); 
    border: 1px solid rgba(255, 255, 255, 0.12); 
    border-radius: 16px; 
    font-size: 13px; 
    color: var(--text-secondary); 
    text-decoration: none; 
    transition: all 0.2s ease;
    cursor: default;
    pointer-events: none;
}

/* === MACROS === */
.recipe-macros-summary {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 20px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    text-align: center;
    transition: all 0.2s ease;
}

.recipe-macros-summary:hover {
    background: rgba(255, 255, 255, 0.06);
}

.macro-info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.macro-info-item .value {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
}

.macro-info-item .label {
    font-size: 12px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.recipe-serving-info {
    grid-column: 1 / -1;
    font-size: 12px;
    color: var(--text-secondary);
    margin: 12px 0 0 0;
    text-align: center;
}

/* === TEMPO E PORÇÕES === */
.recipe-timing-servings {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
}

.recipe-timing-servings:hover {
    background: rgba(255, 255, 255, 0.06);
}

.timing-item, .servings-item {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-secondary);
    font-size: 14px;
}

.timing-item i, .servings-item i {
    color: var(--accent-orange);
    width: 16px;
}

/* === SEÇÕES === */
.recipe-section {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 20px;
    transition: all 0.2s ease;
}

.recipe-section:hover {
    background: rgba(255, 255, 255, 0.06);
}

.recipe-section-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 16px 0;
    display: flex;
    align-items: center;
    gap: 12px;
}

.recipe-section-title::before {
    content: '';
    width: 4px;
    height: 20px;
    background: var(--accent-orange);
    border-radius: 2px;
}

/* === INGREDIENTES === */
.recipe-ingredient-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.recipe-ingredient-list li {
    padding: 12px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    color: var(--text-secondary);
    font-size: 15px;
    line-height: 1.4;
    position: relative;
    padding-left: 20px;
}

.recipe-ingredient-list li:last-child {
    border-bottom: none;
}

.recipe-ingredient-list li::before {
    content: '•';
    color: var(--accent-orange);
    position: absolute;
    left: 0;
    top: 12px;
}

/* === INSTRUÇÕES === */
.instruction-step {
    display: flex;
    gap: 16px;
    margin-bottom: 20px;
    padding: 16px;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 12px;
    border-left: 3px solid var(--accent-orange);
}

.step-number {
    width: 28px;
    height: 28px;
    background: var(--accent-orange);
    color: #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 14px;
    flex-shrink: 0;
}

.instruction-step p {
    color: var(--text-secondary);
    line-height: 1.5;
    margin: 0;
}

/* === OBSERVAÇÕES === */
.recipe-notes-card {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 20px;
    transition: all 0.2s ease;
}

.recipe-notes-card:hover {
    background: rgba(255, 255, 255, 0.06);
}

/* === REGISTRAR REFEIÇÃO === */
.register-meal-section {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 20px;
    transition: all 0.2s ease;
}

.register-meal-section:hover {
    background: rgba(255, 255, 255, 0.06);
}

.register-meal-section .recipe-section-title {
    text-align: center;
}

/* === FORMULÁRIO === */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.form-control {
    width: 100%;
    height: 48px;
    padding: 0 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 12px;
    color: var(--text-primary);
    font-size: 15px;
    transition: all 0.2s ease;
    box-sizing: border-box;
}

.form-control:focus {
    outline: none;
    border-color: var(--accent-orange);
    background: rgba(255, 255, 255, 0.08);
}

.btn-primary {
    width: 100%;
    height: 52px;
    background: var(--accent-orange);
    border: none;
    border-radius: 16px;
    color: #fff;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.btn-primary:hover {
    background: #ff7a1a;
}

/* === RESPONSIVIDADE === */
@media (max-width: 768px) {
    .recipe-name-main {
        font-size: 24px;
    }
    
    .recipe-macros-summary {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }
    
    .recipe-timing-servings {
        flex-direction: column;
        gap: 12px;
        text-align: center;
    }
}

/* === TOUCH PARA ELEMENTOS INTERATIVOS === */
.back-button,
.recipe-action-favorite,
.btn-primary,
.form-control,
.category-tag {
    touch-action: manipulation !important;
}

</style>
<div class="fixed-background"></div>
    <div id="alert-container"></div>

    <div class="app-container" id="recipe-container" style="display: none;">
    <div class="header-nav recipe-detail-header">
        <a href="javascript:history.back()" class="back-button" aria-label="Voltar"><i class="fas fa-chevron-left"></i></a>
            <a href="#" id="favorite-btn" class="recipe-action-favorite favorite-toggle-btn" aria-label="Favoritar receita">
                <i class="far fa-heart"></i>
            </a>
    </div>

        <img id="recipe-image" src="" alt="" class="recipe-detail-image">

    <div class="recipe-main-info card-shadow-light">
            <h1 class="recipe-name-main" id="recipe-name"></h1>
            <p class="recipe-description-short" id="recipe-description" style="display: none;"></p>
            <div class="category-tags-container" id="category-tags" style="display: none;"></div>
    </div>

        <div class="recipe-macros-summary card-shadow-light" id="recipe-macros">
            <div class="macro-info-item"><span class="value" id="macro-kcal">0</span><span class="label">Kcal</span></div>
            <div class="macro-info-item"><span class="value" id="macro-carbs">0g</span><span class="label">Carbo</span></div>
            <div class="macro-info-item"><span class="value" id="macro-fat">0g</span><span class="label">Gordura</span></div>
            <div class="macro-info-item"><span class="value" id="macro-protein">0g</span><span class="label">Proteína</span></div>
            <p class="recipe-serving-info" id="serving-info"></p>
        </div>

        <div class="recipe-timing-servings card-shadow-light" id="timing-servings" style="display: none;"></div>

        <div class="recipe-section card-shadow-light" id="ingredients-section" style="display: none;">
        <h3 class="recipe-section-title">Ingredientes</h3>
            <ul class="recipe-ingredient-list" id="ingredients-list"></ul>
    </div>

        <div class="recipe-section card-shadow-light" id="instructions-section" style="display: none;">
        <h3 class="recipe-section-title">Modo de Preparo</h3>
            <div class="recipe-instructions" id="instructions-content"></div>
        </div>

        <div class="recipe-section recipe-notes-card card-shadow-light" id="notes-section" style="display: none;">
        <h3 class="recipe-section-title">Observação</h3>
            <p id="notes-content"></p>
    </div>

    <div class="register-meal-section card-shadow">
        <h3 class="recipe-section-title text-center">Registrar esta Refeição</h3>
            <form id="log-meal-form">
                <input type="hidden" name="recipe_id" id="recipe_id" value="">
            <div class="form-group">
                <label for="meal_type">Refeição:</label>
                    <select name="meal_type" id="meal_type" class="form-control"></select>
            </div>
            <div class="form-group">
                <label for="date_consumed">Data:</label>
                    <select name="date_consumed" id="date_consumed" class="form-control"></select>
            </div>
             <div class="form-group">
                <label for="servings_consumed">Porções consumidas:</label>
                <input type="number" name="servings_consumed" id="servings_consumed" class="form-control" value="1.0" min="0.1" step="0.1" required>
            </div>
            <button type="submit" class="btn btn-primary"><i class="fas fa-plus"></i> Registrar no Diário</button>
        </form>
    </div>
</div>

    <div id="loading-state" style="text-align: center; padding: 40px 20px; color: var(--text-secondary);">
        <i class="fas fa-spinner fa-spin" style="font-size: 48px; margin-bottom: 16px;"></i>
        <p>Carregando receita...</p>
    </div>

    <!-- Bottom Navigation -->
    
    
    <!-- Scripts -->

<script src="./assets/js/pages/view_recipe.js"></script>
</div>